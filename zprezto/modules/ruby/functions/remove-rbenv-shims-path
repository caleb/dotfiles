# remove the shims directory from the path so that it gets re-added to the beginning
# if the shims directory is already in the path, then rbenv init does not add it again
# the trouble is when starting sub-shells (like from tmux) path_helper gets executed
# from /etc/zshenv which prepends the standard paths before our shims path, and if
# rbenv init doesn't prepend the shims directory to the path, then we end up with
# a path that has the system ruby executables before our shims path
if (( $+commands[rbenv] )); then
  rbenv_path="${commands[rbenv]}"
  rbenv_home="$(dirname $(dirname "${rbenv_path}"))"
  rbenv_shims_path="${rbenv_home}/shims"

  path=("${(@)path:#"${rbenv_shims_path}"}")
fi